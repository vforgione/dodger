{% extends 'app/warehouse/base.html' %}

{% block content %}
<div class="table-responsive">

{% if shipment %}
<h2>Shipment {{ shipment.friendly_name }}</h2>
<table class="table table-striped detail-table">
  <tbody>
    <tr>
      <th>ID</th><td>{{ shipment.id }}</td>
    </tr>
    <tr>
      <th>Friendly Name</th><td>{{ shipment.friendly_name }}</td>
    </tr>
    <tr>
      <th>PO Friendly Name</th><td><a href="{% url 'app:po__view' shipment.purchase_order.pk %}">{{ shipment.purchase_order.friendly_name }}</a></td>
    </tr>
    <tr>
      <th>Received By</th><td>{{ shipment.received_by.username }}</td>
    </tr>
    <tr>
      <th>Received On</th><td>{{ shipment.received_on }}</td>
    </tr>
    <tr>
      <td colspan="2">
        <h4>Line Items</h4>
        <div class="table-responsive">
        <table class="table table-condensed">
          <thead>
            <tr>
              <th>SKU</th><th>Qty Received</th>
            </tr>
          </thead>
          <tbody>
            {% for li in shipment.shipmentlineitem_set.all %}
            <tr>
              <td><a href="{% url 'app:sku__view' li.sku.pk %}">{{ li.sku.description }}</a></td>
              <td>{{ li.qty_received }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<a class="btn btn-primary default" href="{% url 'app:shipment__view' %}">Back To List</a>

{% elif shipments %}
<h2>View Shipments</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th><th>Friendly Name</th><th>PO Friendly Name</th><th>Received On</th><th>Received By</th>
    </tr>
  </thead>
  <tbody>
    {% for ship in shipments %}
    <tr>
      <td>{{ ship.purchase_order.id }}</td>
      <td><a href="{% url 'app:shipment__view' ship.pk %}">{{ ship.friendly_name }}</a></td>
      <td><a href="{% url 'app:po__view' ship.purchase_order.pk %}">{{ ship.purchase_order.friendly_name }}</a></td>
      <td>{{ ship.received_on }}</td>
      <td>{{ ship.received_by }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="container">
  {% if shipments.has_previous %}
  <a class="btn btn-primary default" href="?page={{ shipments.previous_page_number }}">Previous</a>
  {% endif %}

  Page {{ shipments.number }} of {{ shipments.paginator.num_pages }}

  {% if shipments.has_next %}
  <a class="btn btn-primary default" href="?page={{ shipments.next_page_number }}">Next</a>
  {% endif %}
</div>

{% else %}
<h2>View Shipments</h2>
<p>No data received.</p>

{% endif %}
</div>
{% endblock %}

{% block contentjs %}
{% load static %}
{% endblock %}
